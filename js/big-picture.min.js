import"./big-picture-settings.min.js";import{bigPictureWindow}from"./big-picture-settings.min.js";const body=document.body,bigPictureSource=bigPictureWindow.querySelector(".big-picture__img").children[0],commentTemplate=document.querySelector("#social").content,commentsList=bigPictureWindow.querySelector(".social__comments"),commentDescription=bigPictureWindow.querySelector(".social__caption"),commentsCurrentCount=document.querySelector(".comment-count__showed"),commentsTotalCount=bigPictureWindow.querySelector(".comment-count__total"),likesCountInBigPicture=document.querySelector(".likes-count"),commentsLoader=bigPictureWindow.querySelector(".comments-loader"),showBigPicture=(e,t,o)=>{bigPictureSource.src=e.querySelector(".picture__img").src,commentDescription.textContent=t[o].description,likesCountInBigPicture.textContent=e.querySelector(".picture__likes").textContent,commentsLoader.classList.remove("hidden"),body.classList.add("modal-open"),getComments(t,o),loadMoreComments(),bigPictureWindow.classList.remove("hidden"),commentsLoader.addEventListener("click",loadMoreComments)};function getComments(e,t){for(let o=0;o<e[t].comments.length;o++){const n=e[t].comments[o];commentsTotalCount.textContent=e[t].comments.length;const m=commentTemplate.cloneNode(!0),c=m.querySelector(".social__comment"),s=m.querySelector(".social__picture"),i=m.querySelector(".social__text");s.src=n.avatar,s.alt=`Комментарий пользователя ${n.name}`,i.textContent=n.message,c.classList.add("hidden"),commentsList.appendChild(m)}}let shownCommentsCount=0;const commentsPerLoad=5;function loadMoreComments(){shownCommentsCount+=commentsPerLoad,commentsCurrentCount.textContent=shownCommentsCount,shownCommentsCount>=commentsList.children.length&&(commentsCurrentCount.textContent=commentsList.children.length,commentsLoader.classList.add("hidden"),commentsLoader.removeEventListener("click",loadMoreComments));for(let e=0;e<commentsPerLoad;e++){const t=commentsList.children[e+(shownCommentsCount-commentsPerLoad)];if(!t)break;t.classList.remove("hidden")}}function resetShownCommentsCount(){shownCommentsCount=0}export{commentsList,showBigPicture,loadMoreComments,commentsLoader,resetShownCommentsCount};