const preview=document.querySelector(".img-upload__preview img"),filterList=document.querySelector(".effects__list"),sliderFilter=document.querySelector(".effect-level"),filterValue=document.querySelector(".effect-level__value");sliderFilter.style.display="none",noUiSlider.create(sliderFilter,{range:{min:0,max:1},start:0,step:.1,connect:"lower",format:{to:function(e){return Number.isInteger(e)?e:e.toFixed(1)},from:function(e){return parseFloat(e)}}});let currentFilter="",valueEffect=0;sliderFilter.noUiSlider.on("update",(()=>{valueEffect=sliderFilter.noUiSlider.get(),filterValue.value=valueEffect;document.querySelector(".noUi-horizontal .noUi-handle").style.setProperty("--value-filter",`"${valueEffect}"`),getCurrentValueFilter(currentFilter,valueEffect)})),filterList.addEventListener("change",onClickFilter);const getFormatValueFilter=e=>{e.includes("marvin")?sliderFilter.noUiSlider.updateOptions({format:{to:function(e){return e.toFixed(0)},from:function(e){return e}}}):sliderFilter.noUiSlider.updateOptions({format:{to:function(e){return Number.isInteger(e)?e:e.toFixed(1)},from:function(e){return parseFloat(e)}}})};function onClickFilter(e){const t=e.target.getAttribute("value");preview.className="",getFormatValueFilter(t),t.includes("none")?(sliderFilter.style.display="none",currentFilter="none"):sliderFilter.style.display="block",t.includes("chrome")&&(sliderFilter.noUiSlider.updateOptions({range:{min:0,max:1},step:.1}),preview.classList.add("effects__preview--chrome"),currentFilter="chrome"),t.includes("sepia")&&(sliderFilter.noUiSlider.updateOptions({range:{min:0,max:1},step:.1}),preview.classList.add("effects__preview--sepia"),currentFilter="sepia"),t.includes("marvin")&&(sliderFilter.noUiSlider.updateOptions({range:{min:0,max:100},step:1}),preview.classList.add("effects__preview--marvin"),currentFilter="marvin"),t.includes("phobos")&&(sliderFilter.noUiSlider.updateOptions({range:{min:0,max:3},step:.1}),preview.classList.add("effects__preview--phobos"),currentFilter="phobos"),t.includes("heat")&&(sliderFilter.noUiSlider.updateOptions({range:{min:1,max:3},step:.1}),preview.classList.add("effects__preview--heat"),currentFilter="heat"),sliderFilter.noUiSlider.set(0),getCurrentValueFilter(currentFilter,valueEffect)}function getCurrentValueFilter(e,t){"none"===e&&(preview.style.filter="none"),"sepia"===e&&(preview.style.filter=`sepia(${t})`),"chrome"===e&&(preview.style.filter=`grayscale(${t})`),"marvin"===e&&(preview.style.filter=`invert(${t}%)`),"phobos"===e&&(preview.style.filter=`blur(${t}px)`),"heat"===e&&(preview.style.filter=`brightness(${t})`)}const resetFilters=()=>{sliderFilter.style.display="none",preview.className="",preview.style="none"};export{sliderFilter,onClickFilter,resetFilters};